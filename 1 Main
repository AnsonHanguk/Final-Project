// Anson Final (Creating Two Classes for User Information)
// Auther: Anson
// Class: CS161 Spring 2025
// 06/08/2025
// Java program that allows user to enter data, save profile , and purchase paper with total calculaion 


/*
Program starts and java.io and utill scanner are imported for use in program
program creates a file direcrtory for saved user information
then program establishes the variables for each product needed for the program
initilize the varibles outlined in method specfiication 

Then program asks for name

If name matches saved user information, they skip to the shop part of the program.

If not, they set up acount with all requierd data listed in the group specification 

When all information is enterd, user is saved to usersinfo.txt and person1 is created in person class 

user now clicks enter to open the shop

all three types of papers and thier cost apears

user can type 1-3 to choose the paper they want

they can then type how many sets of paper they would like to buy

finaly the system creates a receipt with final math calculation
 */

//import java.io so system can read data stored on computer
import java.io.* ; 

//Import scanner to allow the user to input their own information to be used in the other classes
import java.util.Scanner;

//set up class
public class Main {
	
	//create a save directory for the program
	static final String SavedUsers = "usersinfo.txt";
	
	
	public static void main(String[]args) {
	
//bring scanner in
Scanner input = new Scanner(System.in);  








//Set up/Initialize variables I want to sell in my paper shop

Product p1 = new Product ("Hammermill Paper", 31.99); 
Product p2 = new Product ("True Red Paper", 55.99);
Product p3 = new Product ("Domtar Paper", 59.29);

//set up the varibales needed for user outlined in req def
String name, lastname, address, billinfo, phone;

//ask for first name
System.out.println ("Enter your first name");
//next line typed into consol will be first name or match with exisiting user
name = input.nextLine().trim();

//for returning user (name matches
if(customerexists(name)) {
	System.out.println ("Nice to see you again" + name + "! Click enter to shop! ");
	name = input.nextLine().trim();	
//breaks and moves past else loop, to shop section when they click enter
} else {
//user does no match. Create a new profile
	System.out.println("Thank you for joining our paper shop, we will aks you for a little more information");
	
	System.out.println ("Enter your last name");
	 lastname = input.nextLine();
	
		System.out.println ( "Enter Address");
	
	address = input.nextLine();

	System.out.println ( "Enter Billing Info (random numbers for a joke)");

	billinfo = input.nextLine();

	System.out.println ( "Enter Phone Number (random numbers for a joke)");

	phone = input.nextLine();

	//set up an object, person1 and cary the four variables into the customer class to be used later in the program


	//create customer with enterd user data from scanner 
	Customer customer1 = new Customer(name, lastname, address, phone, billinfo);
	customer1.printInfo();
	//also use method savedcustomer to save data
	SavedCustomer(customer1);
	}
		
	
		
// print all shop information (products to buy)
		
		System.out.println ("Welecome to Our Paper Shop Take a Look at the Avavable Products");
		System.out.println("1." + p1.name +"$"+ p1.price );
		System.out.println("2." + p2.name +"$"+ p2.price );
		System.out.println("3." + p3.name +"$"+ p3.price );
		
		
		
		
			System.out.println("Enter product number 1, 2 or 3, or type Checkout to finish!");
			String choice = input.nextLine();
			
			if(choice.equals("1")) {
				System.out.println ("how many sets of Hammermil paper would you like?");
				int qty = Integer.parseInt(input.nextLine());
				p1.purchase(qty);
				
			} else if(choice.equals("2")) {
					System.out.println ("how many sets of True Red paper would you like?");
					int qty = Integer.parseInt(input.nextLine());
					p2.purchase(qty);
					
			} else if(choice.equals("3")) {
				System.out.println ("how many sets of Domtar Paper would you like");
				int qty = Integer.parseInt(input.nextLine());
				p3.purchase(qty);
			} else if(choice.equals("Checkout")) {
			
		}
		
			System.out.println ("Todays Receipt");
			p1.receipt();
			p2.receipt();
			p3.receipt();
			double total = p1.getTotal()+p2.getTotal()+ p3.getTotal();
			System.out.printf ("Total: $%.2f%n", total);
	
	
		
		
	}








	
private static boolean customerexists(String name) {
	try (BufferedReader reader = new BufferedReader(new FileReader(SavedUsers))){
		String line;
		while ((line = reader.readLine()) !=null){
			if (line.trim().equalsIgnoreCase(name)){
				return true;
			}
		reader.readLine();
		reader.readLine();
	}
	} catch (IOException e) {
		
	}
	
	return false;
}

	  

	public static void SavedCustomer(Customer customer1) {
	        try (BufferedWriter writer = new BufferedWriter(new FileWriter(SavedUsers, true))) {
	            writer.write(customer1.name);
	            writer.newLine();
	            writer.write(customer1.lastname);
	            writer.newLine();
	            writer.write(customer1.address +", "+ customer1.phone +", "+ customer1.billinfo);
	            writer.newLine();
	        } catch (IOException e) {
	            System.out.println("Error saving user.");
	            e.printStackTrace();
	        }

	}

}

	



///end
	
